preprocess:
  target_black_on_white: true
  denoise:
    enable: false
    method: "gaussian"   # or "bilateral"
    strength: 1.0
  binarize:
    method: "otsu"    # or "adaptive"
    block_size: 31
    C: 7
  morph:
    close_iter: 0
    open_iter: 0

skeleton:
  prune_spurs: true
  spur_min_length_px: 18

path_extract:
  mode: "main_open_path"
  crossing_policy: "overpass"
  choose_component: "all"   # "largest" or "all"
  loop_cut: "min_curvature"   # or "leftmost", "topmost"
  cluster_radius_px: 4.0
  junction_bridge_max_px: 12.0
  tangent_k: 10

fit:
  degree: 3
  max_control_points: 50
  simplify:
    method: "rdp"       # Ramer-Douglas-Peucker
    epsilon_px: 1.2
    smooth_enable: false
    smooth_window: 7
    smooth_passes: 1
  spline:
    smoothing: 6.0      # balanced: reduce jitter while preserving shape
    max_iter: 6
    fallback_if_fail: true
    anchor_correction_enable: true
    anchor_tolerance_px: 2.0
    anchor_snap_max_dist_px: 10.0
    anchor_weight: 20.0
    anchor_neighbor_weight: 6.0
    anchor_refit_max_iter: 2
    anchor_sample_count: 400

export:
  plane: "XY"
  layer_name: "sketch_curve"
  object_name: "main_nurbs"
  multi_object_prefix: "stroke"

output:
  mode: "multi"   # "single" or "multi"
  multi:
    min_length_px: 20
    max_curves: 50
    include_loops: true
    sort_by: "length"
    preserve_junctions: true
    junction_snap_radius_px: 3.0
